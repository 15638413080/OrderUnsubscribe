<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<h3>User登录</h3>
<form action="submitdata/" method="post">
    {% csrf_token %}
    {{ userLoginForm.as_p }}
    <input type="submit", value="登录">
    
</form>
<div><a href="{% url 'registerforms' %}">注册</a></div>
</body>
</html>

<script>
    $.ajax(
        {
            url: 'http://127.0.0.1:8000/login/',
            type: 'POST',
            data: trans_str,
            contentType: 'application/json',
            dataType:'json',
            success: function (data) {
                localStorage.clear()
                localStorage.token = data.token
                localStorage.username = data.username
                location.href = '/index.html'
            },
            error: function () {
                alert('用户名或密码错误！')
            }
        })
</script>